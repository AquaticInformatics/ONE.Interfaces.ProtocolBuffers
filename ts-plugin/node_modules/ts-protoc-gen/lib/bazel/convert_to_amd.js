"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var minimist = require("minimist");
var fs = require("fs");
function main() {
    var args = minimist(process.argv.slice(2));
    var wrapInAMDModule = function (contents) {
        return "define(\"" + args.input_base_path + "/" + args.output_module_name + "\", function(require, exports, module) {\n" + contents + "\n});";
    };
    var replaceRecursiveFilePaths = function (contents) {
        return contents.replace(/(\.\.\/)+/g, args.workspace_name + "/");
    };
    var removeJsExtensionsFromRequires = function (contents) {
        return contents.replace(/(require\(.*).js/g, function (_, captureGroup) {
            return captureGroup;
        });
    };
    var initialContents = fs.readFileSync(args.input_file_path, "utf8");
    var transformations = [
        wrapInAMDModule,
        replaceRecursiveFilePaths,
        removeJsExtensionsFromRequires,
    ];
    var finalContents = transformations.reduce(function (currentContents, transform) {
        return transform(currentContents);
    }, initialContents);
    fs.writeFileSync(args.output_file_path, finalContents, "utf8");
}
main();
//# sourceMappingURL=convert_to_amd.js.map